<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BurgerTok - Menú de Hamburguesas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --md-color-primary: #fbbf24; /* Amber 400 */
            --md-color-on-primary: #1e293b; /* Slate 800 */
            --md-color-surface: #111827; /* Gray 900 */
            --md-color-on-surface: #f9fafb; /* Gray 50 */
            --md-color-surface-container: rgba(20, 20, 20, 0.6);
            --md-color-surface-modal: #1f2937; /* Gray 800 */
        }
    
        /* Estilo base para el cuerpo y la fuente */
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--md-color-surface);
            color: var(--md-color-on-surface);
            overflow: hidden; /* Evitar scroll en el body */
        }

        /* Contenedor principal para los "shorts" con scroll snap */
        .shorts-container {
            scroll-snap-type: y mandatory;
            overflow-y: scroll;
            height: 100vh;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .shorts-container::-webkit-scrollbar {
            display: none;
        }

        /* Cada "short" individual */
        .short-item {
            scroll-snap-align: start;
            height: 100vh;
            width: 100vw;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Superposición de video/imagen para oscurecer el fondo */
        .background-video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: -1;
            filter: brightness(0.5);
        }
        
        /* Animaciones de entrada */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-on-load {
            opacity: 0; /* Start hidden */
            animation: fadeInUp 0.6s ease-out forwards;
        }
        .delay-1 { animation-delay: 0.2s; }
        .delay-2 { animation-delay: 0.4s; }

        /* Estilos para desvanecer elementos en scroll */
        .logo-header, #swipe-notice {
            transition: opacity 0.4s ease-out, transform 0.4s ease-out;
        }
        .fade-out {
            opacity: 0;
            pointer-events: none;
            transform: translateY(-20px);
        }
        #swipe-notice.fade-out {
            transform: translateY(20px);
        }
        
        /* Estilos Material 3 Expressive */
        .m3-button {
            background-color: var(--md-color-primary);
            color: var(--md-color-on-primary);
            border-radius: 1.5rem; /* 24px */
            padding: 0.75rem 1.5rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .m3-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
        }

        .m3-fab {
            background-color: var(--md-color-primary);
            color: var(--md-color-on-primary);
            width: 4rem;
            height: 4rem;
            border-radius: 1.5rem; /* 24px */
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        .m3-modal {
             background-color: var(--md-color-surface-modal);
             border-radius: 1.75rem; /* 28px */
        }
        
        .m3-content-container {
            background-color: var(--md-color-surface-container);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-radius: 1.5rem 1.5rem 0 0;
        }
        
        /* Animación para el botón de agregar */
        @keyframes button-pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        .pop-animation {
            animation: button-pop 0.3s ease-out;
        }
        
        /* Animación para el carrito */
        @keyframes jiggle {
          0%, 100% { transform: translateX(0) scale(1.1); }
          10%, 30%, 50%, 70%, 90% { transform: translateX(-2px) scale(1.1); }
          20%, 40%, 60%, 80% { transform: translateX(2px) scale(1.1); }
        }
        .jiggle-animation {
          animation: jiggle 0.5s ease-in-out;
        }
    </style>
</head>
<body>

    <div class="shorts-container">
        <!-- Short 1: La Clásica -->
        <section id="clasica" class="short-item">
            <video class="background-video" autoplay loop muted playsinline poster="https://placehold.co/1080x1920/000000/ffffff?text=Cargando...">
                <source src="burger.mp4" type="video/mp4">
            </video>
            <div class="absolute top-0 left-0 p-6">
                <h1 class="logo-header text-4xl font-black tracking-tighter">BurgerTok 🔥</h1>
            </div>
            <div class="absolute bottom-0 left-0 p-6 pb-24 w-full m3-content-container">
                <div class="flex justify-between items-center mb-3 animate-on-load">
                     <h2 class="text-3xl font-bold">La Clásica</h2>
                     <button class="add-to-cart-btn m3-button text-sm" data-id="clasica" data-name="La Clásica" data-price="350">
                        Agregar
                    </button>
                </div>
                <p class="text-md mt-1 max-w-xs animate-on-load delay-1">Carne de res premium, queso cheddar, lechuga fresca, tomate y nuestra salsa secreta. ¡Un sabor que nunca falla!</p>
                <div class="mt-4 animate-on-load delay-2">
                    <span class="text-2xl font-bold">RD$350.00</span>
                </div>
            </div>
        </section>

        <!-- Short 2: BBQ Bacon -->
        <section id="bbq" class="short-item">
            <video class="background-video" autoplay loop muted playsinline poster="https://placehold.co/1080x1920/000000/ffffff?text=Cargando...">
                <source src="beaconburger.mp4" type="video/mp4">
            </video>
            <div class="absolute top-0 left-0 p-6">
                <h1 class="logo-header text-4xl font-black tracking-tighter">BurgerTok 🔥</h1>
            </div>
            <div class="absolute bottom-0 left-0 p-6 pb-24 w-full m3-content-container">
                <div class="flex justify-between items-center mb-3">
                    <h2 class="text-3xl font-bold">BBQ Bacon</h2>
                    <button class="add-to-cart-btn m3-button text-sm" data-id="bbq" data-name="BBQ Bacon" data-price="420">
                        Agregar
                    </button>
                </div>
                <p class="text-md mt-1 max-w-xs">¡Para los amantes del ahumado! Tiras de tocino crujiente, aros de cebolla y nuestra salsa BBQ casera.</p>
                <div class="mt-4">
                    <span class="text-2xl font-bold">RD$420.00</span>
                </div>
            </div>
        </section>

        <!-- Short 3: Veggie Deluxe -->
        <section id="veggie" class="short-item">
            <video class="background-video" autoplay loop muted playsinline poster="https://placehold.co/1080x1920/000000/ffffff?text=Cargando...">
                <source src="paella.mp4" type="video/mp4">
            </video>
             <div class="absolute top-0 left-0 p-6">
                <h1 class="logo-header text-4xl font-black tracking-tighter">BurgerTok 🔥</h1>
            </div>
            <div class="absolute bottom-0 left-0 p-6 pb-24 w-full m3-content-container">
                 <div class="flex justify-between items-center mb-3">
                    <h2 class="text-3xl font-bold">Veggie Deluxe</h2>
                     <button class="add-to-cart-btn m3-button text-sm" data-id="veggie" data-name="Veggie Deluxe" data-price="380">
                        Agregar
                    </button>
                </div>
                <p class="text-md mt-1 max-w-xs">Una deliciosa hamburguesa de champiñones y frijoles negros, con aguacate, brotes y mayonesa vegana. ¡Sabor sin carne!</p>
                <div class="mt-4">
                    <span class="text-2xl font-bold">RD$380.00</span>
                </div>
            </div>
        </section>
    </div>

    <!-- Botón de Compartir Flotante -->
    <button id="share-button" class="fixed bottom-24 right-7 bg-white/20 backdrop-blur-sm text-white w-14 h-14 rounded-2xl flex items-center justify-center shadow-lg transform hover:scale-110 transition-transform">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z"/></svg>
    </button>

    <!-- Botón del Carrito Flotante -->
    <button id="cart-button" class="fixed bottom-6 right-6 m3-fab flex items-center justify-center transition-transform hover:scale-110">
        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>
        <span id="cart-count" class="absolute -top-1 -right-1 bg-red-600 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center">0</span>
    </button>
    
    <!-- Modal del Carrito -->
    <div id="cart-modal" class="hidden fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50">
        <div class="m3-modal shadow-xl w-11/12 max-w-md p-6">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-2xl font-bold">Tu Pedido</h3>
                <button id="close-modal-btn" class="text-gray-400 hover:text-white text-3xl">&times;</button>
            </div>
            <div id="cart-items" class="max-h-60 overflow-y-auto space-y-3">
                <!-- Los artículos del carrito se insertarán aquí -->
            </div>
            <div id="cart-summary" class="mt-6 border-t border-gray-700 pt-4">
                <div class="flex justify-between text-lg">
                    <span>Subtotal:</span>
                    <span id="subtotal">RD$0.00</span>
                </div>
                <div class="flex justify-between text-sm text-gray-400">
                    <span>ITBIS (18%):</span>
                    <span id="itbis">RD$0.00</span>
                </div>
                <div class="flex justify-between text-xl font-bold mt-2">
                    <span>Total:</span>
                    <span id="total">RD$0.00</span>
                </div>
                <button id="whatsapp-btn" class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-2xl mt-6 flex items-center justify-center transition-transform hover:scale-105">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" class="mr-2"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.894 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.886-.001 2.267.651 4.383 1.905 6.191l-1.04 3.833 3.897-1.032z"/></svg>
                    Pedir por WhatsApp
                </button>
            </div>
        </div>
    </div>

    <!-- Aviso para el usuario -->
    <div id="swipe-notice" class="absolute bottom-4 left-1/2 -translate-x-1/2 text-white bg-black/50 px-3 py-1 rounded-full text-xs">
        ↑ Desliza hacia arriba para ver más ↑
    </div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const addToCartButtons = document.querySelectorAll('.add-to-cart-btn');
        const cartButton = document.getElementById('cart-button');
        const shareButton = document.getElementById('share-button');
        const cartModal = document.getElementById('cart-modal');
        const closeModalBtn = document.getElementById('close-modal-btn');
        const cartCount = document.getElementById('cart-count');
        const cartItemsContainer = document.getElementById('cart-items');
        const subtotalEl = document.getElementById('subtotal');
        const itbisEl = document.getElementById('itbis');
        const totalEl = document.getElementById('total');
        const whatsappBtn = document.getElementById('whatsapp-btn');
        const WHATSAPP_PHONE_NUMBER = '18495142209';
        
        const shortsContainer = document.querySelector('.shorts-container');
        const logoHeaders = document.querySelectorAll('.logo-header');
        const swipeNotice = document.getElementById('swipe-notice');
        const shortItems = document.querySelectorAll('.short-item');

        let cart = [];
        let currentVisibleProductId = shortItems[0]?.id || '';

        // Función para agregar al carrito
        function addToCart(id, name, price) {
            const existingItem = cart.find(item => item.id === id);
            if (existingItem) {
                existingItem.quantity++;
            } else {
                cart.push({ id, name, price: parseFloat(price), quantity: 1 });
            }
            showNotification(`${name} agregado al carrito!`);

            cartButton.classList.add('jiggle-animation');
            cartButton.addEventListener('animationend', () => {
                cartButton.classList.remove('jiggle-animation');
            }, { once: true });
            
            updateCart();
        }
        
        // Función para remover del carrito
        function removeFromCart(id) {
            cart = cart.filter(item => item.id !== id);
            updateCart();
        }
        
        // Función para mostrar notificación
        function showNotification(message) {
            const existingNotification = document.querySelector('.fixed.top-5');
            if(existingNotification) existingNotification.remove();

            const notification = document.createElement('div');
            notification.className = 'fixed top-5 left-1/2 -translate-x-1/2 bg-green-500 text-white px-4 py-2 rounded-2xl shadow-lg z-50';
            notification.textContent = message;
            document.body.appendChild(notification);
            setTimeout(() => {
                notification.remove();
            }, 2000);
        }

        // Función para actualizar el carrito (UI y cálculos)
        function updateCart() {
            cartItemsContainer.innerHTML = '';
            let subtotal = 0;
            let totalItems = 0;

            if (cart.length === 0) {
                cartItemsContainer.innerHTML = '<p class="text-gray-400">Tu carrito está vacío.</p>';
            } else {
                cart.forEach(item => {
                    const itemTotal = item.price * item.quantity;
                    subtotal += itemTotal;
                    totalItems += item.quantity;

                    const itemElement = document.createElement('div');
                    itemElement.className = 'flex justify-between items-center text-sm';
                    itemElement.innerHTML = `
                        <div class="flex-grow">
                            <p class="font-bold">${item.name}</p>
                            <p class="text-gray-400">RD$${item.price.toFixed(2)} x ${item.quantity}</p>
                        </div>
                        <div class="flex items-center">
                            <span class="font-semibold mr-4">RD$${itemTotal.toFixed(2)}</span>
                            <button class="remove-item-btn text-red-500 hover:text-red-400 text-2xl font-bold" data-id="${item.id}">&times;</button>
                        </div>
                    `;
                    cartItemsContainer.appendChild(itemElement);
                });
            }

            const itbis = subtotal * 0.18;
            const total = subtotal + itbis;

            subtotalEl.textContent = `RD$${subtotal.toFixed(2)}`;
            itbisEl.textContent = `RD$${itbis.toFixed(2)}`;
            totalEl.textContent = `RD$${total.toFixed(2)}`;
            cartCount.textContent = totalItems;
        }

        // Función para formatear el mensaje de WhatsApp
        function formatWhatsappMessage() {
            let message = '¡Hola! Quisiera hacer el siguiente pedido:\n\n';
            cart.forEach(item => {
                message += `*${item.quantity}x* - ${item.name}\n`;
            });
            message += '\n--------------------\n';
            message += `*Subtotal: ${subtotalEl.textContent}*\n`;
            message += `*ITBIS (18%): ${itbisEl.textContent}*\n`;
            message += `*Total a pagar: ${totalEl.textContent}*`;
            return encodeURIComponent(message);
        }
        
        // Handle URL hash on page load
        function scrollToHash() {
            const hash = window.location.hash;
            if (hash) {
                const element = document.querySelector(hash);
                if (element) {
                    setTimeout(() => {
                        element.scrollIntoView({ behavior: 'smooth' });
                    }, 100);
                }
            }
        }

        // Event Listeners
        addToCartButtons.forEach(button => {
            button.addEventListener('click', (e) => {
                const buttonElement = e.currentTarget;
                const { id, name, price } = buttonElement.dataset;
                
                addToCart(id, name, price);
                
                buttonElement.classList.add('pop-animation');
                buttonElement.addEventListener('animationend', () => {
                    buttonElement.classList.remove('pop-animation');
                }, { once: true });
            });
        });

        cartButton.addEventListener('click', () => {
            updateCart();
            cartModal.classList.remove('hidden');
        });
        
        shareButton.addEventListener('click', () => {
            const shareUrl = `${window.location.origin}${window.location.pathname}#${currentVisibleProductId}`;
            try {
                navigator.clipboard.writeText(shareUrl).then(() => {
                    showNotification("¡Enlace del producto copiado!");
                });
            } catch (err) {
                const textArea = document.createElement("textarea");
                textArea.value = shareUrl;
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                try {
                    document.execCommand('copy');
                    showNotification("¡Enlace del producto copiado!");
                } catch (err) {
                    showNotification("Error al copiar enlace.");
                }
                document.body.removeChild(textArea);
            }
        });

        closeModalBtn.addEventListener('click', () => {
            cartModal.classList.add('hidden');
        });

        cartModal.addEventListener('click', (e) => {
            if (e.target.id === 'cart-modal') {
                cartModal.classList.add('hidden');
            }
        });
        
        cartItemsContainer.addEventListener('click', (e) => {
            if (e.target.classList.contains('remove-item-btn')) {
                const id = e.target.dataset.id;
                removeFromCart(id);
            }
        });
        
        whatsappBtn.addEventListener('click', () => {
            if (cart.length === 0) {
                 showNotification("Tu carrito está vacío.");
                return;
            }
            const message = formatWhatsappMessage();
            const whatsappUrl = `https://api.whatsapp.com/send/?phone=${WHATSAPP_PHONE_NUMBER}&text=${message}&type=phone_number&app_absent=0`;
            window.open(whatsappUrl, '_blank');
        });
        
        shortsContainer.addEventListener('scroll', () => {
            const isScrolled = shortsContainer.scrollTop > 20;
            logoHeaders.forEach(logo => logo.classList.toggle('fade-out', isScrolled));
            swipeNotice.classList.toggle('fade-out', isScrolled);
        });
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    currentVisibleProductId = entry.target.id;
                }
            });
        }, { threshold: 0.7 });

        shortItems.forEach(item => observer.observe(item));

        updateCart();
        scrollToHash();
    });
</script>

</body>
</html>
